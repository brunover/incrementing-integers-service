(window["webpackJsonpincrementing-integers-service"]=window["webpackJsonpincrementing-integers-service"]||[]).push([[0],{208:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(27),o=n.n(c),i=(n(71),n(12)),l=n(13),s=n(15),u=n(14),d=n(16),p=n(3),m=function(e){function t(){return Object(i.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"fd-container fd-container--centered"},r.a.createElement("div",{className:"fd-has-margin-bottom-medium"},r.a.createElement(p.Panel,null,r.a.createElement(p.Panel.Body,null,r.a.createElement(p.Alert,{type:"warning"},r.a.createElement("h3",null,"Page not found - 404"),r.a.createElement("p",null,window.location.href))))))}}]),t}(a.Component),f=n(23),h=n.n(f),g=n(29),v=n(25),b=n(63),y=n(64),E=n.n(y),w=function(){return window.history.replaceState({},document.title,window.location.pathname)},O=r.a.createContext(),j=function(){return Object(a.useContext)(O)},S=n(22),k=function(e){function t(){return Object(i.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(S.d,null,r.a.createElement(S.a,{exact:!0,from:"/",to:"/dashboard"}),r.a.createElement(S.b,{path:"/dashboard",component:W}),r.a.createElement(S.b,{path:"",component:m})))}}]),t}(a.Component),x=function(){var e=j(),t=e.isAuthenticated,n=e.loginWithRedirect;return r.a.createElement("div",null,!t&&n({}),t&&r.a.createElement(k,null))},I=function(e){function t(){return Object(i.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.context.logout,t=this.props.user;return r.a.createElement("div",{className:"fd-container"},r.a.createElement(p.Shellbar,{logo:r.a.createElement("img",{alt:"Incrementing Integer Service",src:"/logo.png"}),productTitle:"Incrementing Integer Service",profile:{glyph:"settings",colorAccent:4,initials:"...",userName:t.email||"No user"},profileMenu:[{callback:function(){e()},glyph:"log",name:"Log Out",size:"s"}]}))}}]),t}(a.Component);I.contextType=O;var C=n(188),N=function(e){return C.stringify(e)},L=n(191),B=localStorage.token;B||(B=localStorage.token="1234567");var P=window.location.protocol,T=window.location.hostname,A=L.create({baseURL:"".concat(P,"//").concat(T,"/api/v1"),headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Bearer ".concat(B)}}),U=function(e){return A.post("/users",e).then(function(e){return e})},z=function(e,t){return A.patch("/users/".concat(e,"/current"),t).then(function(e){return e})},R=function(e){return A.get("/users/".concat(e,"/next")).then(function(e){return e})},W=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r))))._isMounted=!1,n.state={isLoadingUser:!0,isLoadingInteger:!1,error:null,success:null,user:{}},n.fetchUser=function(e){var t=e.email;return U(N({email:t})).then(function(e){var t=e.data||{};console.log(t),n.safeSetState({isLoadingUser:!1,user:t})}).catch(function(e){console.error(e.response),n.safeSetState({isLoadingUser:!1,error:e})})},n.requestNewInteger=function(){n.safeSetState({isLoadingInteger:!0}),R(n.state.user.id||0).then(function(e){console.log(e),console.log(n.state.user.id),200===e.status&&n.safeSetState(function(t){var n=t.user;return n.int_value=e.data,{isLoadingInteger:!1,user:n}})}).catch(function(e){console.error(e.response),n.safeSetState({isLoadingInteger:!1,error:e})})},n.resetInteger=function(){var e=window.prompt("Inform the new integer value (bigger than zero):");e&&(e=e.trim(),isNaN(e)?alert("You must provide a number"):(e=Number(e))<0?alert("You must provide a number bigger than zero"):(n.safeSetState({isLoadingInteger:!0}),z(n.state.user.id||0,N({current:e})).then(function(e){200===e.status&&n.safeSetState(function(t){var n=t.user;return n.int_value=e.data,{isLoadingInteger:!1,user:n}})}).catch(function(e){console.error(e.response),n.setState({isLoadingInteger:!1,error:e})})))},n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"safeSetState",value:function(e){this._isMounted?this.setState(e):console.warn("State was not updated because component is unmounted",e)}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"componentDidMount",value:function(){this._isMounted=!0;var e=this.context.user;this.fetchUser(e)}},{key:"render",value:function(){var e=this,t=this.state,n=t.isLoadingUser,a=t.isLoadingInteger,c=t.error,o=t.user;return r.a.createElement("div",{className:"fd-container fd-container--centered"},r.a.createElement(I,{user:o}),r.a.createElement("div",{className:"fd-container"},r.a.createElement("div",{className:"fd-has-margin-bottom-medium"},r.a.createElement("div",{className:"fd-container"},r.a.createElement(p.Panel,null,r.a.createElement(p.Panel.Body,null,c&&r.a.createElement(p.Status,{type:"error",glyph:"message-error"},c.message),r.a.createElement(p.ActionBar,null,r.a.createElement(p.ActionBar.Header,{description:"Request the next integer or reset the value of the current one",title:"Your personal integer"}),r.a.createElement(p.ActionBar.Actions,null,r.a.createElement(p.Button,{glyph:"add",onClick:function(){return e.requestNewInteger()}},"Request New Integer"),r.a.createElement(p.Button,{glyph:"refresh",onClick:function(){return e.resetInteger()}},"Reset My Integer"))),n?r.a.createElement(_,null):r.a.createElement(p.PanelGrid,{cols:2},r.a.createElement(p.Panel,null,r.a.createElement(p.Panel.Body,null,r.a.createElement(p.Tile,null,r.a.createElement(p.Tile.Content,{title:"User"},r.a.createElement("p",{className:"fd-has-type-4"},o.email||"No user"))))),r.a.createElement(p.Panel,null,r.a.createElement(p.Panel.Body,null,r.a.createElement(p.Tile,null,r.a.createElement(p.Tile.Content,{title:"Current Integer"},r.a.createElement("p",{className:"fd-has-type-4"},o.int_value||0,a&&r.a.createElement(_,{size:"s",type:"synch"})))))))))))))}}]),t}(a.Component);W.contextType=O;var _=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,c=new Array(a),o=0;o<a;o++)c[o]=arguments[o];return(n=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(c)))).renderSpinner=function(e){var t=e.size,n="";if(t)switch(t.toLowerCase()){case"s":n="fd-loading-spinner--small";break;case"l":n="fd-loading-spinner--large";break;default:n=""}return r.a.createElement("div",{className:"fd-loading-spinner ".concat(n),"aria-hidden":"false","aria-label":"Loading"})},n.renderSynchronizer=function(e){var t=e.size,n=e.animate,a=e.icon;return r.a.createElement("span",{className:"\n          fd-has-margin-x-tiny \n          sap-icon--".concat(a," \n          sap-icon--").concat(t," \n          sap-icon--animate-").concat(n,"\n        ")})},n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.display,n=e.type;return t?"synch"===n.toLowerCase()?this.renderSynchronizer(this.props):this.renderSpinner(this.props):null}}]),t}(a.Component);_.defaultProps={display:!0,type:"spin",size:"m",animate:"spin",icon:"synchronize"};var M=function(){return j().loading?r.a.createElement(_,null):r.a.createElement("div",{className:"App"},r.a.createElement("header",null,r.a.createElement(x,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var q=n(33),H=n(36);o.a.render(r.a.createElement(function(e){var t=e.children,n=e.onRedirectCallback,c=void 0===n?w:n,o=Object(b.a)(e,["children","onRedirectCallback"]),i=Object(a.useState)(),l=Object(v.a)(i,2),s=l[0],u=l[1],d=Object(a.useState)(),p=Object(v.a)(d,2),m=p[0],f=p[1],y=Object(a.useState)(),j=Object(v.a)(y,2),S=j[0],k=j[1],x=Object(a.useState)(!0),I=Object(v.a)(x,2),C=I[0],N=I[1],L=Object(a.useState)(!1),B=Object(v.a)(L,2),P=B[0],T=B[1];Object(a.useEffect)(function(){(function(){var e=Object(g.a)(h.a.mark(function e(){var t,n,a,r,i;return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E()(o);case 2:if(t=e.sent,k(t),!window.location.search.includes("code=")){e.next=10;break}return e.next=7,t.handleRedirectCallback();case 7:n=e.sent,a=n.appState,c(a);case 10:return e.next=12,t.isAuthenticated();case 12:if(r=e.sent,u(r),!r){e.next=19;break}return e.next=17,t.getUser();case 17:i=e.sent,f(i);case 19:N(!1);case 20:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}})()()},[]);var A=function(){var e=Object(g.a)(h.a.mark(function e(){var t,n,a=arguments;return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},T(!0),e.prev=2,e.next=5,S.loginWithPopup(t);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.error(e.t0);case 10:return e.prev=10,T(!1),e.finish(10);case 13:return e.next=15,S.getUser();case 15:n=e.sent,f(n),u(!0);case 18:case"end":return e.stop()}},e,null,[[2,7,10,13]])}));return function(){return e.apply(this,arguments)}}(),U=function(){var e=Object(g.a)(h.a.mark(function e(){var t;return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return N(!0),e.next=3,S.handleRedirectCallback();case 3:return e.next=5,S.getUser();case 5:t=e.sent,N(!1),u(!0),f(t);case 9:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}();return r.a.createElement(O.Provider,{value:{isAuthenticated:s,user:m,loading:C,popupOpen:P,loginWithPopup:A,handleRedirectCallback:U,getIdTokenClaims:function(){return S.getIdTokenClaims.apply(S,arguments)},loginWithRedirect:function(){return S.loginWithRedirect.apply(S,arguments)},getTokenSilently:function(){return S.getTokenSilently.apply(S,arguments)},getTokenWithPopup:function(){return S.getTokenWithPopup.apply(S,arguments)},logout:function(){return S.logout.apply(S,arguments)}}},t)},{domain:H.domain,client_id:H.clientId,redirect_uri:window.location.origin,onRedirectCallback:function(e){window.history.replaceState({},document.title,e&&e.targetUrl?e.targetUrl:window.location.pathname)}},r.a.createElement(q.a,null,r.a.createElement(M,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},36:function(e){e.exports=JSON.parse('{"domain":"brunover.auth0.com","clientId":"TxrQ5DQ0jVBBzATHyn3M5zBupHIZBoSg"}')},66:function(e,t,n){e.exports=n(208)},71:function(e,t,n){}},[[66,1,2]]]);
//# sourceMappingURL=main.1e160ca7.chunk.js.map